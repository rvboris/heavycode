(function(){function b(c,g,d){var f=c.getWrapperElement();var e;e=f.appendChild(document.createElement("div"));if(d){e.className="CodeMirror-dialog CodeMirror-dialog-bottom"}else{e.className="CodeMirror-dialog CodeMirror-dialog-top"}if(typeof g=="string"){e.innerHTML=g}else{e.appendChild(g)}return e}function a(c,d){if(c.state.currentNotificationClose){c.state.currentNotificationClose()}c.state.currentNotificationClose=d}CodeMirror.defineExtension("openDialog",function(h,i,k){a(this,null);var e=b(this,h,k&&k.bottom);var d=false,f=this;function j(){if(d){return}d=true;e.parentNode.removeChild(e)}var g=e.getElementsByTagName("input")[0],c;if(g){if(k&&k.value){g.value=k.value}CodeMirror.on(g,"keydown",function(l){if(k&&k.onKeyDown&&k.onKeyDown(l,g.value,j)){return}if(l.keyCode==13||l.keyCode==27){CodeMirror.e_stop(l);j();f.focus();if(l.keyCode==13){i(g.value)}}});if(k&&k.onKeyUp){CodeMirror.on(g,"keyup",function(l){k.onKeyUp(l,g.value,j)})}if(k&&k.value){g.value=k.value}g.focus();CodeMirror.on(g,"blur",j)}else{if(c=e.getElementsByTagName("button")[0]){CodeMirror.on(c,"click",function(){j();f.focus()});c.focus();CodeMirror.on(c,"blur",j)}}return j});CodeMirror.defineExtension("openConfirm",function(l,f,n){a(this,null);var g=b(this,l,n&&n.bottom);var h=g.getElementsByTagName("button");var e=false,j=this,c=1;function m(){if(e){return}e=true;g.parentNode.removeChild(g);j.focus()}h[0].focus();for(var d=0;d<h.length;++d){var k=h[d];(function(i){CodeMirror.on(k,"click",function(o){CodeMirror.e_preventDefault(o);m();if(i){i(j)}})})(f[d]);CodeMirror.on(k,"blur",function(){--c;setTimeout(function(){if(c<=0){m()}},200)});CodeMirror.on(k,"focus",function(){++c})}});CodeMirror.defineExtension("openNotification",function(f,d){a(this,i);var e=b(this,f,d&&d.bottom);var h=d&&(d.duration===undefined?5000:d.duration);var c=false,g;function i(){if(c){return}c=true;clearTimeout(g);e.parentNode.removeChild(e)}CodeMirror.on(e,"click",function(j){CodeMirror.e_preventDefault(j);i()});if(h){g=setTimeout(i,d.duration)}})})();(function(){function a(s,q){var r;if(typeof s=="string"){r=s.charAt(0);s=new RegExp("^"+s.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&"),q?"i":"")}else{s=new RegExp("^(?:"+s.source+")",s.ignoreCase?"i":"")}if(typeof s=="string"){return{token:function(t){if(t.match(s)){return"searching"}t.next();t.skipTo(s.charAt(0))||t.skipToEnd()}}}return{token:function(t){if(t.match(s)){return"searching"}while(!t.eol()){t.next();if(r){t.skipTo(r)||t.skipToEnd()}if(t.match(s,false)){break}}}}}function l(){this.posFrom=this.posTo=this.query=null;this.overlay=null}function g(q){return q.state.search||(q.state.search=new l())}function p(q){return typeof q=="string"&&q==q.toLowerCase()}function n(q,r,s){return q.getSearchCursor(r,s,p(r))}function k(q,t,r,u,s){if(q.openDialog){q.openDialog(t,s,{value:u})}else{s(prompt(r,u))}}function o(r,t,s,q){if(r.openConfirm){r.openConfirm(t,q)}else{if(confirm(s)){q[0]()}}}function d(r){var q=r.match(/^\/(.*)\/([a-z]*)$/);return q?new RegExp(q[1],q[2].indexOf("i")==-1?"":"i"):r}var c='Search: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';function j(q,r){var s=g(q);if(s.query){return h(q,r)}k(q,c,"Search for:",q.getSelection(),function(t){q.operation(function(){if(!t||s.query){return}s.query=d(t);q.removeOverlay(s.overlay,p(s.query));s.overlay=a(s.query);q.addOverlay(s.overlay);s.posFrom=s.posTo=q.getCursor();h(q,r)})})}function h(q,r){q.operation(function(){var s=g(q);var t=n(q,s.query,r?s.posFrom:s.posTo);if(!t.find(r)){t=n(q,s.query,r?CodeMirror.Pos(q.lastLine()):CodeMirror.Pos(q.firstLine(),0));if(!t.find(r)){return}}q.setSelection(t.from(),t.to());q.scrollIntoView({from:t.from(),to:t.to()});s.posFrom=t.from();s.posTo=t.to()})}function m(q){q.operation(function(){var r=g(q);if(!r.query){return}r.query=null;q.removeOverlay(r.overlay)})}var f='Replace: <input type="text" style="width: 10em"/> <span style="color: #888">(Use /re/ syntax for regexp search)</span>';var i='With: <input type="text" style="width: 10em"/>';var e="Replace? <button>Yes</button> <button>No</button> <button>Stop</button>";function b(q,r){k(q,f,"Replace:",q.getSelection(),function(s){if(!s){return}s=d(s);k(q,i,"Replace with:","",function(w){if(r){q.operation(function(){for(var y=n(q,s);y.findNext();){if(typeof s!="string"){var x=q.getRange(y.from(),y.to()).match(s);y.replace(w.replace(/\$(\d)/,function(z,A){return x[A]}))}else{y.replace(w)}}})}else{m(q);var v=n(q,s,q.getCursor());var u=function(){var y=v.from(),x;if(!(x=v.findNext())){v=n(q,s);if(!(x=v.findNext())||(y&&v.from().line==y.line&&v.from().ch==y.ch)){return}}q.setSelection(v.from(),v.to());q.scrollIntoView({from:v.from(),to:v.to()});o(q,e,"Replace?",[function(){t(x)},u])};var t=function(x){v.replace(typeof s=="string"?w:w.replace(/\$(\d)/,function(y,z){return x[z]}));u()};u()}})})}CodeMirror.commands.find=function(q){m(q);j(q)};CodeMirror.commands.findNext=j;CodeMirror.commands.findPrev=function(q){j(q,true)};CodeMirror.commands.clearSearch=m;CodeMirror.commands.replace=b;CodeMirror.commands.replaceAll=function(q){b(q,true)}})();(function(){var a=CodeMirror.Pos;function b(j,h,k,f){this.atOccurrence=false;this.doc=j;if(f==null&&typeof h=="string"){f=false}k=k?j.clipPos(k):a(0,0);this.pos={from:k,to:k};if(typeof h!="string"){if(!h.global){h=new RegExp(h.source,h.ignoreCase?"ig":"g")}this.matches=function(o,s){if(o){h.lastIndex=0;var l=j.getLine(s.line).slice(0,s.ch),q=0,n,r;for(;;){h.lastIndex=q;var p=h.exec(l);if(!p){break}n=p;r=n.index;q=n.index+(n[0].length||1);if(q==l.length){break}}var m=(n&&n[0].length)||0;if(!m){if(r==0&&l.length==0){n=undefined}else{if(r!=j.getLine(s.line).length){m++}}}}else{h.lastIndex=s.ch;var l=j.getLine(s.line),n=h.exec(l);var m=(n&&n[0].length)||0;var r=n&&n.index;if(r+m!=l.length&&!m){m=1}}if(n&&m){return{from:a(s.line,r),to:a(s.line,r+m),match:n}}}}else{var d=h;if(f){h=h.toLowerCase()}var e=f?function(l){return l.toLowerCase()}:function(l){return l};var i=h.split("\n");if(i.length==1){if(!h.length){this.matches=function(){}}else{this.matches=function(n,p){if(n){var o=j.getLine(p.line).slice(0,p.ch),l=e(o);var m=l.lastIndexOf(h);if(m>-1){m=c(o,l,m);return{from:a(p.line,m),to:a(p.line,m+d.length)}}}else{var o=j.getLine(p.line).slice(p.ch),l=e(o);var m=l.indexOf(h);if(m>-1){m=c(o,l,m)+p.ch;return{from:a(p.line,m),to:a(p.line,m+d.length)}}}}}}else{var g=d.split("\n");this.matches=function(m,o){var s=i.length-1;if(m){if(o.line-(i.length-1)<j.firstLine()){return}if(e(j.getLine(o.line).slice(0,g[s].length))!=i[i.length-1]){return}var r=a(o.line,g[s].length);for(var n=o.line-1,l=s-1;l>=1;--l,--n){if(i[l]!=e(j.getLine(n))){return}}var t=j.getLine(n),p=t.length-g[0].length;if(e(t.slice(p))!=i[0]){return}return{from:a(n,p),to:r}}else{if(o.line+(i.length-1)>j.lastLine()){return}var t=j.getLine(o.line),p=t.length-g[0].length;if(e(t.slice(p))!=i[0]){return}var q=a(o.line,p);for(var n=o.line+1,l=1;l<s;++l,++n){if(i[l]!=e(j.getLine(n))){return}}if(j.getLine(n).slice(0,g[s].length)!=i[s]){return}return{from:q,to:a(n,g[s].length)}}}}}}b.prototype={findNext:function(){return this.find(false)},findPrevious:function(){return this.find(true)},find:function(e){var d=this,h=this.doc.clipPos(e?this.pos.from:this.pos.to);function f(i){var j=a(i,0);d.pos={from:j,to:j};d.atOccurrence=false;return false}for(;;){if(this.pos=this.matches(e,h)){this.atOccurrence=true;return this.pos.match||true}if(e){if(!h.line){return f(0)}h=a(h.line-1,this.doc.getLine(h.line-1).length)}else{var g=this.doc.lineCount();if(h.line==g-1){return f(g)}h=a(h.line+1,0)}}},from:function(){if(this.atOccurrence){return this.pos.from}},to:function(){if(this.atOccurrence){return this.pos.to}},replace:function(e){if(!this.atOccurrence){return}var d=CodeMirror.splitLines(e);this.doc.replaceRange(d,this.pos.from,this.pos.to);this.pos.to=a(this.pos.from.line+d.length-1,d[d.length-1].length+(d.length==1?this.pos.from.ch:0))}};function c(h,f,g){if(h.length==f.length){return g}for(var e=Math.min(g,h.length);;){var d=h.slice(0,e).toLowerCase().length;if(d<g){++e}else{if(d>g){--e}else{return e}}}}CodeMirror.defineExtension("getSearchCursor",function(e,f,d){return new b(this.doc,e,f,d)});CodeMirror.defineDocExtension("getSearchCursor",function(e,f,d){return new b(this,e,f,d)})})();